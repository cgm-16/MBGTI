<!DOCTYPE html>
<html lang="kr">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, user-scalable=no">
        <title>MBGTI</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <link href="./mbgti.css" rel="stylesheet">
    </head>
    <body>
        <article id="startPg">
            <img id="start" src="./bg/start.jpg" alt="">

            <div id="startbtn" class="btn btn-warning btn-lg text-light text-nowrap" onclick="startQuiz()">시작하기</div>
        </article>

        <article id="mbgti" style="display: none;">
            <div id="question">
                <img src="./bg/bg.jpg" id="bg" alt="" sizes="" srcset="">
                <img src="" id="bgframe" alt="" sizes="" srcset="">
                <div id="qbox">
                    <div class="btn btn-light" onclick="choose(1)" style="margin-bottom: 3%;">
                        <div class="bigletter">A</div>
                        <div id="A" class="smletter"></div>
                    </div>
                    <div class="btn btn-light" onclick="choose(2)">
                        <div class="bigletter">B</div>
                        <div id="B" class="smletter"></div>
                    </div>
                </div>
            </div>
        </article>
        
        <article id="result" style="display: none;">
            <div id="results"></div>
        </article>
        
        <script>

            var lstResults = new Array()
            var n = 1;
            var gunUrls = ["./results/jdn.PNG", "./results/jdy.PNG"
                            , "./results/jjn.PNG", "./results/jjy.PNG"
                            , "./results/ydn.PNG", "./results/ydy.PNG"
                            , "./results/yjn.PNG", "./results/yjy.PNG"   
                        ];

            var quizUrls = ["./bg/mbgti.png", "./bg/mbgti2.png"
                            , "./bg/mbgti3.png" , "./bg/mbgti4.png"
                            , "./bg/mbgti5.png", "./bg/mbgti6.png"
                            , "./bg/mbgti7.png", "./bg/mbgti8.png"
                            , "./bg/mbgti9.png"
                        ];

            var quizAB = [
                        {A: "고민은 무슨, 랜드마크가 국룰이지~", B: "오래 살고 봐야 하는 거 아님? 짤파밍 ㄱㄱ"}
                        , {A: "보급은 못참지ㅎ 줍줍", B: "사람들 몰리겠네;; 튀튀"}
                        , {A: "바아~로 킬 추가하러 가야지~", B: "일단 멈춰! 괜히 나서면 안 돼,,"}
                        , {A: "나만 믿어! 달려 가서 적을 손봐주기!", B: "위험에 처한 팀원을 구해주기 위해 연막탄 던져주기!"}
                        , {A: "운전 실력 뽐내며 교전지역 정찰하기", B: "언덕 타고 올라가서 팀의 시야 넓혀주기"}
                        , {A: "힐템을 버린다", B: "총알탄을 버린다"}
                        , {A: "인생은 실전ㅇㅇ 쟤를 살리는 게 이득인지 빠르게 따져본다", B: "의리에 죽고 의리에 사는 나! 일단 몸이 반응한다"}
                        , {A: "나 왜 졌지? 그때 그렇게 했어야했나? 머리속으로 시뮬레이션 백만번 돌림", B: "머선129...3초간 멍때리고 바로 다음판 돌림"}
                        , {A: "막판으로 맘 정했으면 그대로 끝내야지~(끈다)", B: "아,, 담판 무조건 치킨먹을 각인데,, 한판 더 기?"}
                        ]
                    
            function startQuiz() {
                $("#startPg").hide();
                $("#mbgti").show();
                nextQue(0);
            }

            function choose(ans) {
                if (n <= 8) {
                    nextQue(n)
                    lstResults.push(`q${n}=${ans}`);
                    n++;
                    console.log(lstResults);
                } else {
                    lstResults.push(`q${n}=${ans}`);
                    console.log(lstResults);
                    showResults();
                }
            }

            function nextQue(n) {
                document.getElementById("bgframe").src = quizUrls[n];
                document.getElementById("A").innerText = quizAB[n]["A"];
                document.getElementById("B").innerText = quizAB[n]["B"];
            }

            function showResults() {
                $("#mbgti").hide();
                $("#result").show();
                var lstAnswers = lstResults.map(n => n[3]);
                
                var imgUrl = getGun(lstAnswers);
                document.getElementById("results").innerHTML += `<img id="resultimg" src="${imgUrl}">`;
            }

            function getGun(lst) {
                var text = "";
                var j = 0;
                var ch = 0;
                var c = 0;
                var isYp = false;
                var isCharge = false;
                var isCool = false;

                for (i = 0; i < 9; i++) {
                    if(i < 3) {
                        if (lst[i] === "1") {
                            j++;
                        }
                    } else if(i > 6) {
                        if (lst[i] === "1") {
                            c++;
                        }
                    } else {
                        if (lst[i] === "1") {
                            ch++;
                        }
                    }
                }
                
                if (j >= 2) {
                    isYp = true;
                }

                if (ch >= 2) {
                    isCharge = true;
                }

                if (c >= 2) {
                    isCool = true;
                }

                if (!isYp && isCharge && isCool) {
                    return gunUrls[0];
                } else if (!isYp && isCharge && !isCool) {
                    return gunUrls[1];
                } else if (!isYp && !isCharge && isCool) {
                    return gunUrls[2];
                } else if (!isYp && !isCharge && !isCool) {
                    return gunUrls[3];
                } else if (isYp && isCharge && isCool) {
                    return gunUrls[4];
                } else if (isYp && isCharge && !isCool) {
                    return gunUrls[5];
                } else if (isYp && !isCharge && isCool) {
                    return gunUrls[6];
                } else {
                    return gunUrls[7];
                }
            }
        </script>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
    </body>
</html>